# 实战案例之图片批量加水印 {#task_gxw_jnt_12b .task}

本例使用编码方式开发应用，权限要求如下：

-   码栈版本：专业版或者企业版
-   权限要求：企业版要求需授权开发模式

给图片批量添加水印流程设计如下：

1.  将要批量添加水印的图片归档到同一文件夹下。
2.  读取文件夹中所有图片文件的名称（J\_File\_PathToAllFileName）。
3.  依次给每张图片添加水印（J\_Pic\_WaterMark\_Text）。
4.  将处理后的图片保存为指定宽度（J\_Pic\_Resize）。

1.   登录码栈客户端。 
2.   在开发页面，单击**开发新应用**。 
3.   选择编写代码开发应用，单击**确定**。 
4.   在**基本信息**页面填写应用名称、使用说明等信息。 

    请填写完整的使用说明，有利于应用的传播使用。

5.   在流程设计页面录入如下代码。 

    **说明：** 

    您可以通过左侧方法描述页签，查询参数和说明。

    ```
    
    Func Example()
    ;定义函数开始
    J_Pic_Capture("D:\1.jpg", 1, 1, 500, 800)
    ;截取屏幕起始坐标1,1 结束坐标为500,800 的屏幕矩形区域，并保存文件为D:\1.jpg
    J_Pic_WaterMark_Start("D:\1.jpg", "D:\2.jpg")
    ;开始图片处理，初始文件是"D:\1.jpg"，处理之后打算把文件另存为"D:\2.jpg"
    J_Pic_WaterMark_Logo("D:\logo.png", 100, 50)
    ;在被处理图片的100,50 像素处打上logo水印（水印路径：D:\logo.png）
    J_Pic_WaterMark_Text("taobao.com", 400, 400, 0xFFFF0000, "微软雅黑", 12, "下划线")
    ;在被处理图片的400,400 像素处打上文本水印，文本字体为红色，字体微软雅黑，字号12号，带下划线的
    J_Pic_WaterMark_Text("copy right", 450, 450)
    ;在被处理图片的450,450像素处打上文本水印，字型字号等都是默认的
    J_Pic_WaterMark_End(50)
    ;结束打水印操作，设置保存的图片清晰度为50%
    J_Pic_Resize("D:\2.jpg", "D:\3.jpg", 1000, "高度")
    ;等比例设置图片D:\2.jpg高度为1000，并另存为D:\3.jpg
    J_Pic_Resize("D:\2.jpg", "D:\4.jpg", 2000, "宽度")
    ;等比例设置图片D:\2.jpg宽度为2000，并另存为D:\4.jpg
    J_Pic_Resize("D:\2.jpg", "D:\5.jpg", 700, 1000)
    ;设置图片D:\2.jpg宽度为700高度为1000，并另存为D:\5.jpg
    EndFunc
    ```

6.   在界面设计与调试预览页面，填写按钮名称及函数。 

    其中，函数对应为需要调用的流程。

7.   单击**按钮（start）**，验证应用执行结果。 
8.   验证通过后，单击**保存**应用。 
9.   应用开发完成后，您可以发布应用，可以将应用分发至企业内部或者应用市场中。 

